let  Products = [
    {
        id: 1,
        img:'./src/phones/1.jpg',
        price1: 135000,
        price2: 150000,
        productname: "Iphone1",
        articul: "b135"
    },
    {
        id: 2,
        img:'./src/phones/2.png',
        price1: 125000,
        price2: 160000,
        productname: "Iphone2",
        articul: "b136"
    },
    {
        id: 3,
        img:'./src/phones/3.jpg',
        price1: 105000,
        price2: 110000,
        productname: "Iphone3",
        articul: "b137"
    },
    {
        id: 4,
        img:'./src/phones/4.jpg',
        price1: 125000,
        price2: 130000,
        productname: "Iphone4",
        articul: "b138"
    },
    {
        id: 5,
        img:'./src/phones/5.jpg',
        price1: 15000,
        price2: 250000,
        productname: "Iphone5",
        articul: "b139"
    },
    {
        id: 6,
        img:'./src/phones/6.jpg',
        price1: 13000,
        price2: 230000,
        productname: "Iphone6",
        articul: "b140"
    },
    {
        id: 7,
        img:'./src/phones/7.jpg',
        price1: 12000,
        price2: 220000,
        productname: "Iphone7",
        articul: "b141"
    },
    {
        id: 8,
        img:'./src/phones/8.png',
        price1: 16300,
        price2: 210000,
        productname: "Iphone8",
        articul: "b142"
    },
    {
        id: 9,
        img:'./src/phones/9.jpg',
        price1: 16000,
        price2: 220000,
        productname: "Iphone9",
        articul: "b143"
    },
    {
        id: 10,
        img:'./src/phones/10.jpg',
        price1: 163000,
        price2: 190000,
        productname: "Iphone10",
        articul: "b144"
    },
    {
        id: 11,
        img:'./src/phones/11.jpg',
        price1: 112000,
        price2: 127600,
        productname: "Iphone11",
        articul: "b145"
    },
    {
        id: 12,
        img:'./src/phones/12.jpg',
        price1: 1345000,
        price2: 2230000,
        productname: "Iphone12",
        articul: "b146"
    },
    {
        id: 13,
        img:'./src/phones/13.jpg',
        price1: 1235000,
        price2: 2550000,
        productname: "Iphone13",
        articul: "b147"
    },
    {
        id: 14,
        img:'./src/phones/14.jpg',
        price1: 169840,
        price2: 660000,
        productname: "Iphone14",
        articul: "b148"
    },
    {
        id: 15,
        img:'./src/phones/15.jpg',
        price1: 51623,
        price2: 235711,
        productname: "Iphone15",
        articul: "b149"
    },
    {
        id: 16,
        img:'./src/phones/16.jpg',
        price1: 23521,
        price2: 3479235,
        productname: "Iphone16",
        articul: "b150"
    },
    {
        id: 17,
        img:'./src/phones/17.jpg',
        price1: 81623,
        price2: 192556,
        productname: "Iphone17",
        articul: "b151"
    },
    {
        id: 18,
        img:'./src/phones/18.png',
        price1: 182569,
        price2: 9127545,
        productname: "Iphone18",
        articul: "b152"
    },
    {
        id: 19,
        img:'./src/phones/19.jpg',
        price1: 928754,
        price2: 2983655,
        productname: "Iphone19",
        articul: "b153"
    },
    {
        id: 20,
        img:'./src/phones/20.jpg',
        price1: 98263,
        price2: 528365,
        productname: "Iphone20",
        articul: "b154"
    },
    {
        id: 21,
        img:'./src/phones/21.jpg',
        price1: 98236,
        price2: 9175442,
        productname: "Iphone21",
        articul: "b155"
    },
    {
        id: 22,
        img:'./src/phones/22.jpg',
        price1: 65675,
        price2: 154942,
        productname: "Iphone22",
        articul: "b156"
    },
    {
        id: 23,
        img:'./src/phones/23.jpg',
        price1: 92865,
        price2: 263592,
        productname: "Iphone23",
        articul: "b157"
    },
    {
        id: 24,
        img:'./src/phones/24.jpg',
        price1: 917654,
        price2: 9182644,
        productname: "Iphone24",
        articul: "b158"
    },
    {
        id: 25,
        img:'./src/phones/25.jpg',
        price1: 182659,
        price2: 9821544,
        productname: "Iphone25",
        articul: "b159"
    },
    {
        id: 26,
        img:'./src/phones/26.jpg',
        price1: 1245125,
        price2: 12515623,
        productname: "Iphone26",
        articul: "b160"
    },
    {
        id: 27,
        img:'./src/phones/27.jpg',
        price1: 98632,
        price2: 927835,
        productname: "Iphone27",
        articul: "b161"
    },
    {
        id: 28,
        img:'./src/phones/28.jpg',
        price1: 91524,
        price2: 197254,
        productname: "Iphone28",
        articul: "b162"
    },
    {
        id: 29,
        img:'./src/phones/29.png',
        price1: 873543,
        price2: 9164124,
        productname: "Iphone29",
        articul: "b163"
    },
    {
        id: 30,
        img:'./src/phones/30.png',
        price1: 81544,
        price2: 198690,
        productname: "Iphone30",
        articul: "b164"
    },
    {
        id: 31,
        img:'./src/phones/31.jpg',
        price1: 23426,
        price2: 236215,
        productname: "Iphone31",
        articul: "b165"
    },
    {
        id: 32,
        img:'./src/phones/32.jpg',
        price1: 232626,
        price2: 23623123,
        productname: "Iphone32",
        articul: "b166"
    },
    {
        id: 33,
        img:'./src/phones/33.jpg',
        price1: 182754,
        price2: 1927544,
        productname: "Iphone33",
        articul: "b167"
    },
    {
        id: 34,
        img:'./src/phones/34.jpg',
        price1: 283745,
        price2: 2837532,
        productname: "Iphone34",
        articul: "b168"
    },
    {
        id: 35,
        img:'./src/phones/35.jpg',
        price1: 98273,
        price2: 238752,
        productname: "Iphone35",
        articul: "b169"
    },
    {
        id: 36,
        img:'./src/phones/36.jpg',
        price1: 2342355,
        price2: 235216125,
        productname: "Iphone36",
        articul: "b170"
    },
    {
        id: 37,
        img:'./src/phones/37.jpg',
        price1: 92865,
        price2: 298735,
        productname: "Iphone37",
        articul: "b171"
    },
    {
        id: 38,
        img:'./src/phones/38.jpg',
        price1: 12415,
        price2: 125433,
        productname: "Iphone38",
        articul: "b172"
    },
    {
        id: 39,
        img:'./src/phones/39.jpg',
        price1: 124512,
        price2: 1255434,
        productname: "Iphone39",
        articul: "b173"
    },
    {
        id: 40,
        img:'./src/phones/40.jpg',
        price1: 827354,
        price2: 2875102,
        productname: "Iphone40",
        articul: "b174"
    },
];



// шаблон карточки
const template = document.querySelector('#card').content;
// общий блок для карточек
const cards = document.querySelector('.cards');
Products.forEach(function(product,index){
        
});

Products.forEach(product=>{
    let card = template.querySelector('.card').cloneNode(true);

    // устанавливаем id товара в атрибут data-id для карточки
    card.dataset.id = product.id;
    // card.setAttribute('data-id',product.id);

    // замена контента 
    card.querySelector('.card__title').textContent = product.productname;
    card.querySelector('a').href = '/pages/index.html?id='+product.id;
    card.querySelector('img').src = product.img;
    card.querySelector('.card__price--common').textContent = product.price;
    card.querySelector('.card__price--discount').textContent = product.discount;

    // положили id товара в атрибут data-id у кнопки
    card.querySelector('.card__add').dataset.id = product.id;
    // отрисовываем карточку в общий блок 
    cards.insertAdjacentElement('beforeend',card);

    // добавляем карточку в общий блок 
    //cards.appendChild(card);
    
});


function addProduct(btn){
    //console.log(btn.closest('.card').getAttribute('data-id'));
    //console.log(btn.closest('.card').dataset.id);
    //console.log(btn.dataset.id);
    let id = btn.dataset.id;
    
    // JSON.stringify(products); преобразования в строку в формате JSON
    // JSON.parse(products);    преобразования из строки в обьект или массив

    // получаем данные из localStorage по ключу key_products
    let storage = localStorage.getItem('key_products');
    
    // если есть ключ key_products в localStorage
    if (storage){
        // преобразовываем строку в обьект и перезаписываем переменную storage
        storage = JSON.parse(storage);
    }
    else {
        // если нет ключа key_products в localStorage, то создаем пустой обьект
        storage = {};
    }
    
    // если товара нет в корзине, то добавляем
    if (!storage[id]){
        storage[id] = 1;
    } else {
        storage[id] += 1;
    }

    localStorage.setItem( 'key_products', JSON.stringify(storage) );

}